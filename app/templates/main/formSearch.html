{% extends "base.html" %}

{% block styles %}
{{super()}}
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/dt-1.10.21/b-1.6.2/datatables.min.css"/>
  <link rel="stylesheet" type="text/css" href="{{url_for('static', filename ='css/allPendingForms.css')}}?u={{lastStaticUpdate}}">
  <link rel="stylesheet" type="text/css" href="{{url_for('static', filename ='css/pendingNotesModal.css')}}?u={{lastStaticUpdate}}">
{% endblock %}

{% block scripts %}
{{super()}}
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs/dt-1.10.21/b-1.6.2/datatables.min.js"></script>
  <script type="text/javascript" src="{{url_for('static', filename='js/laborhistory.js')}}?u={{lastStaticUpdate}}"></script>
  <script type="text/javascript" src="{{url_for('static', filename='js/allPendingForms.js')}}?u={{lastStaticUpdate}}"></script>
  <script type="text/javascript" src="{{url_for('static', filename='js/formSearch.js') }}?u={{lastStaticUpdate}}"></script>
  <script type="text/javascript" src="{{url_for('static', filename='js/index.js') }}?u={{lastStaticUpdate}}"></script>
{% endblock %}

{% block app_content %}
<div align="center">
  <h1>{{title}}</h1>
</div>
<br>
<div class="container-fluid" align="center">
  <div align="right">
    <form method="POST" action="/main/formSearch/download">
      <button class="btn btn-success" type="submit" id="download">Download</button>
    </form>
  </div>
  <div class="row col-md-12" align="left">
    <form id="formSearchForm">
        <div class="col-md-2"></div>  <!-- empty div used for positioning -->
        <div class="col-md-5">
          <div class="form-group">
            <label for="termSelect">Term</label>
            <div><select class="selectpicker"
                    name='term'
                    id='termSelect'
                    data-live-search='true'
                    title="All terms">
                    <option value="">All terms</option>
                {% for term in terms %}
                  <option value="{{term.termCode.termCode}}">
                    {{term.termCode.termName}}
                  </option>
                {% endfor %}
            </select></div>
          </div>
          <div class="form-group">
            <label for="departmentSelect">Department</label>
            <div><select class="selectpicker"
                    id="departmentSelect"
                    onchange="populateTable()"
                    title="Department">
              {% for department in departments %}
                  <!-- We want to either select the first option, or the option that matches the department -->
                  {% if currentUser.isLaborAdmin or currentUser.isFinancialAidAdmin or currentUser.isSaasAdmin %}
                        <option value="{{department.DEPT_NAME}}"
                                {% if loop.index == 1 or department.DEPT_NAME == department %} selected {% else %}>{{department.DEPT_NAME}}
                        </option>
                      {% endif %}
                  {% else %}
                      {% if loop.index == 1 or department.DEPT_NAME == department %}
                        <option value="{{department.DEPT_NAME}}"
                                selected>{{department.DEPT_NAME}}
                        </option>
                      {% else %}
                        <option value="{{department.DEPT_NAME}}">
                                      {{department.DEPT_NAME}}
                        </option>
                      {% endif %}
                  {% endif %}
              {% endfor %}
            </select></div>
          </div>
          <div class="form-group">
            <label for="supervisorSelect">Supervisor</label>
            <div><select class="selectpicker"
                    name='supervisor'
                    id='supervisorSelect'
                    data-live-search='true'
                    title="All supervisors">
                    <option value="">All supervisors</option>
                {% for supervisor in supervisors  %}
                  <option value="{{supervisor.ID}}"
                          data-content="{{supervisor.FIRST_NAME}} {{supervisor.LAST_NAME}}<small class='text-muted'> ({{supervisor.ID}})</small>">
                    {{supervisor.FIRST_NAME}} {{supervisor.LAST_NAME}}
                  </option>
                {% endfor %}
            </select></div>
          </div>
          <div class="form-group">
            <label for="studentSelect">Student</label>
            <div><select class="selectpicker"
                    name='student'
                    id='studentSelect'
                    data-live-search='true'
                    title="All students">
                    <option value="">All students</option>
                  {% for student in students %}
                    <option value="{{student.ID}}"
                            data-content="{{student.FIRST_NAME}} {{student.LAST_NAME}}<small class='text-muted'> ({{student.ID}})</small>">
                      {{student.FIRST_NAME}} {{student.LAST_NAME}}
                   </option>
                  {% endfor %}
            </select></div>
          </div>
          <br><br>
          <button type="button" class="btn btn-primary" id="formSearchButton">Search</button>
          <button type="button" class="btn btn-danger" id="clearSelectionsButton">Clear Selections</button>
          <br><br>
        </div>
        <div class="col-md-5">
          <div class="form-group">
            <label for="">Limit Form Status</label>
            <div class="radio">
              <label><input type="radio" value="Pending" id="pending" name="formStatus"> Pending</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="Approved" id="approved" name="formStatus"> Approved</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="Approved Reluctantly" id="approved" name="formStatus"> Approved Reluctantly</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="Denied" id="denied" name="formStatus"> Denied</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="Pre-Student Approval" id="student" name="formStatus"> Pre-Student Approval</label>
            </div>
          </div>
          <br>
          <div class="form-group">
            <label for="">Limit Form Type</label>
            <div class="radio">
              <label><input type="radio" value="Labor Status Form" id="original" name="formType"> Original</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="Labor Adjustment Form" id="adjusted" name="formType"> Adjusted</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="Labor Release Form" id="release" name="formType"> Release</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="Labor Overload Form" id="overload" name="formType"> Overload</label>
            </div>
          </div>
          <div class="form-group">
            <label for="">Limit Evaluation Status</label>
            <div class="radio">
              <label><input type="radio" value="evalMidyearMissing" id="missingMidyearEvaluations" name="evaluations">Missing Midyear Evaluations</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="evalMidyearComplete" id="completedMidyearEvaluations" name="evaluations">Completed Midyear Evaluations</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="evalMissing" id="missingEvaluations" name="evaluations">Missing Final Evaluations</label>
            </div>
            <div class="radio">
              <label><input type="radio" value="evalComplete" id="completedEvaluations" name="evaluations">Completed Final Evaluations</label>
            </div>
          </div>
        </div>
      </form>
      <br>
    </div>
</div>
<table id="formSearchTable" class="table table-striped table-bordered" width="100%">
  <thead>
    <th>Term</th>
    <th>Department</th>
    <th>Supervisor</th>
    <th>Student</th>
    <th>Position (WLS)</th>
    <th>Hours</th>
    <th>Contract Dates</th>
    <th>Created</th>
    <th>Form Status</th>
    <th>Form Type</th>
    <th></th>
  </thead>
</table>

<!-- Overload Modal -->
<div class="modal fade" id="overloadModal" role="dialog" data-backdrop="true" tabindex="-1" aria-labelledby="overloadModalLabel" aria-describedby="overloadModalBody">
  <div class="modal-dialog modal-dialog-scrollable" role="document">
    <div id="content" class="modal-content">
    </div>
  </div>
</div>
<!-- Release Modal -->
<div class="modal fade" id="modalRelease" data-dismiss="modal" tabindex="-1" role="dialog" aria-labelledby="releaseModalLabel" aria-describedby="releaseModalBody">
  <div class="modal-dialog modal-dialog-scrollable" role="document">
    <div id="content" class="modal-content">
    </div>
  </div>
</div>
<!-- Form History Modal -->
<div class="modal fade" id="modal" role="dialog" data-backdrop="true" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable" role="document">
    <div id="content" class="modal-content">
    </div>
  </div>
</div>
{% include "snips/pendingNotesModal.html" %}
{% include "snips/FormsDeny.html" %}
{% include "snips/pendingApprovalModal.html" %}

{% endblock %}
