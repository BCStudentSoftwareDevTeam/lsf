{% extends "base.html" %}

{% block app_content %}

<head>
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
     <!-- link for css and js -->
     <!-- <link rel='stylesheet' type="text/css" href='/static/css/termManagement.css'/> -->
     <!-- These are the outside linkes for the datepicker  -->
     <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
     <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
     <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
     <!-- These are the outside links for the effective date calendar-->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

  <div class="container" >
  <h2 id="termname">Term Management</h2>
  <p>Click on the collapsible panel to open and close it.</p>

  <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

    {% for terms in listOfTerms %}
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="headingOne">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href=#{{terms[0]}} aria-expanded="false" aria-controls={{terms[0]}}>
            Academic Year: {{(terms[0]|string)[:4]}}-{{(((terms[0]|string)[:4])|int)+1}}        <!-- this was the only way to get the Academic year to show properly... sorry -->
          </a>
        </h4>
      </div>
      <div id={{terms[0]}} class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
    <table class="table table-condensed"  id="myTable">
      <thead>
        <tr>
            <th>Term Name</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Term State</th>
        </tr>
        </thead>
        <tbody>

          {% for term in terms %}
                <tr>
                  <td>{{term.termName}}</td> {# checks to see if the start date is empty #}
                  {% if term.termStart == None %}
                    <td>

                      <div id="datepicker#1" class='input-group date'>
                        <input id=start_{{term.termCode}} onchange="getDate(this, {{term.termCode}})" type='text' class="form-control" class="datepicker" class="start" placeholder="MM/DD/YYYY" data-startEnd="start"/>
                          <span class="input-group-addon">
                              <span class="glyphicon glyphicon-calendar"></span>
                          </span>
                      </div>

                    </td>
                  {% endif %}
                  {% if term.termStart != None %} {# checks to see if the start date is not empty #}
                  <td>
                    <div id="datepicker#2" class='input-group date'>
                      <input id=start_{{term.termCode}} onchange="getDate(this, {{term.termCode}})" type='text' class="form-control datepicker start" data-startEnd="start1" value="{{term.termStart.strftime('%m/%d/%Y')}}" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                  </td>
                  {% endif %}
                  {% if term.termEnd == None %} {# checks to see if the end date is empty #}
                    <td>
                      <div id="datepicker#3" class='input-group date'>
                          <input id=end_{{term.termCode}} onchange="getDate(this, {{term.termCode}})" type='text' class="form-control" class="datepicker" placeholder="MM/DD/YYYY" />
                          <span class="input-group-addon">
                              <span class="glyphicon glyphicon-calendar"></span>
                          </span>
                      </div>
                    </td>
                  {% endif %}
                  {% if term.termEnd != None %} {# checks to see if the end date is not empty #}
                  <td>
                    <div id="datepicker#4" class='input-group date'>
                        <input id=end_{{term.termCode}} onchange="getDate(this, {{term.termCode}})" type='text' class="form-control" class="datepicker" value="{{term.termEnd.strftime('%m/%d/%Y')}}" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                  </td>
                  {% endif %}

                  {% if term.termStart != None and term.termEnd != None %}  {# checks to see if there are dates in the term #}
                  <td>
                    <button
                      id="term_btn_{{term.termCode}}"
                      name="termBtn"
                      class="{% if term.termState == 'True' %} btn btn-success {% else %} btn btn-danger {% endif %}"
                      onclick="termStatus({{term.termCode}})"
                      value="{{term.termState}}">{% if term.termState == 'True' %} Open {% elif term.termState == 'False' %} Closed {% endif %}</button>
                  </td>
                  {% endif %}
                </tr>

              {% endfor %}
          </tbody>
    </table>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
<script src="/static/js/termManagement.js"></script>
{% endblock %}
