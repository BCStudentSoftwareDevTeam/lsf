{% block app_content %}
<div class="col-lg-12" align="center" >
  <table id="pendingForms" class="table table-striped pendingForms dataTable" >
    <!-- Made empty header tags because we need to hide the header -->
    <thead id="headTable" text-align="center" >
      <tr id="tableHeaders" class="tableHeaders"  >
        <th> Approve </th>
        <th>Term</th>
        <th>Department</th>
        <th>Supervisor</th>
        <th> </th>
        <th>Students</th>
        <th> Position (WLS)</th>
        <th>Hours</th>
        <th>Created</th>
        <th>Contract Dates</th>
        <th> Edit </th>
      </tr>
    </thead>

    <tbody id="tablebody">
      {% for allForms in all_pending_forms %}
      <tr id="tableData" class="tableData" align="center">
          <td> {# APPROVE #}
            <input type='checkbox' id='chk_{{allForms.formID.laborStatusFormID}}' value= "{{allForms.formID.laborStatusFormID}}" />
            <span  id="notes_{{allForms.formID.laborStatusFormID}}" onclick="getNotes({{allForms.formID.laborStatusFormID}})"
                   class="glyphicon glyphicon-book btn-lg
                        {% if allForms.formID.supervisorNotes != None and allForms.formID.laborDepartmentNotes == None %} text-success
                        {% elif allForms.formID.laborDepartmentNotes != None and allForms.formID.supervisorNotes == None  %} text-danger
                        {% elif allForms.formID.supervisorNotes != None and allForms.formID.laborDepartmentNotes != None %} text-danger
                        {% else %} text-secondary {% endif %}" data-toggle="modal" data-target="#notesModal"> </span>

          </td>
          <td> {# TERM #}
            {{allForms.formID.termCode.termName}}
          </td>
          <td> {# DEPARTMENT #}
            {{allForms.formID.department.DEPT_NAME}} ({{allForms.formID.department.ORG}}-{{allForms.formID.department.ACCOUNT}})
          </td>
          <td> {# SUPERVISOR #}
            {{allForms.formID.supervisor.FIRST_NAME}} {{allForms.formID.supervisor.LAST_NAME}}
          </td>
          <td>
            |
          </td>
          <td> {# STUDENT #}
            {{allForms.formID.studentSupervisee.FIRST_NAME}}  {{allForms.formID.studentSupervisee.LAST_NAME}}  ({{allForms.formID.studentSupervisee.ID}})
          </td>
          <td> {# POSITON AND WLS #}
            {{allForms.formID.POSN_TITLE}} ({{allForms.formID.WLS}})
          </td>
          <td> {# HOURS #}
          {% if allForms.formID.weeklyHours != None%} {{allForms.formID.weeklyHours}} {% else %}   {{allForms.formID.contractHours}} {% endif %}
        </td>
        <td> {# CREATED BY #}
          {{allForms.createdBy.username}}  <br/> {{allForms.createdDate.strftime('%m/%d/%y')}}
        </td>
        <td> {# CREATED DATE #}
           {{allForms.formID.startDate.strftime('%m/%d/%y')}} -  {{allForms.formID.endDate.strftime('%m/%d/%y')}}
        </td>
        <td> {# EDIT #}
          <a href="/modifyLSF/{{allForms.formID.laborStatusFormID}}"> <span id="edit_{{allForms.formID.laborStatusFormID}}" class="glyphicon glyphicon-pencil" ></span> </a>
          <button
                id="reject_{{allForms.formID.laborStatusFormID}}"
                type="button"
                class ="btn btn-danger"
                name = "rejectBtn"
                value = "Reject"
                data-toggle="modal" data-target="#rejectModal">
                Deny
          </button>

        </td>

      </tr>
      {% endfor %}
    </tbody>
    </table>
      <div class="btn-holder">
        <button
          id="approveSelected"
          name="approveBtn"
          type="button"
          class="btn btn-newcolor"
          onclick="insertApprovals();"
          value="Approve Selected">
          Approve Selected
        </button>
      </div>
    </div>


    <!-- START OF MODAL adding notes -->
    <div class="modal fade" id="notesModal" tabindex="-1" role="dialog" aria-labelledby="notesModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick= "clearTextArea()"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="notesModalLabel">Labor Office Notes</h4>
          </div>
          <div class="modal-body" >
            <p> These notes are only for the Labor Office Staff.</p>
            <p> Pre-fill this with the notes from the supervisor </p>
              <div id="notesDiv">
                 <h5> <b>Supervisor Notes  </b> </h5>
                <p id="notesText" class="notesText" </p>


              <h5> <b>Labor Office Notes </b> </h5>

                <textarea id="laborNotesText" rows="5" cols="60" style="resize: none;"> </textarea>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal" id="closeModal" onclick= "clearTextArea()">Close</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal" id="saveNotes" onclick="notesInsert()">Save Notes</button>
          </div>
        </div>
      </div>
    </div>
    <!-- END OF MODAL -->

    <!-- START OF MODAL reject pending-->
    <div class="modal fade" id="rejectModal" tabindex="-1" role="dialog" aria-labelledby="rejectModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="rejectModalLabel">Reject Status Form</h4>
          </div>
          <div class="modal-body">
            ...For Rejection #FIXME: Look at old rejection interface
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
    </div>
    <!-- END OF MODAL-->

    <!-- MODAL -->
    <div class="modal fade" id="SubmitModal" tabindex="-1" role="dialog" aria-labelledby="SubmitModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
          </div>
          <div id="SubmitModalText" class="modal-body">
            The following Labor Status form(s) will be approved:
          </div>
          <div class="modal-footer">
            <button id="submitmodalid"
                    type="submit"
                    class="btn btn-primary"
                    name = "formsubmission"
                    value = "formsubmission"
                    onclick = "userInsert()">Submit</button>
          </div>
        </div>
    </div>
    </div>
    <!-- END OF MODAL -->
</div>

{% endblock %}
