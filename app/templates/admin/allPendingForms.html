{% extends "base.html" %}

{% block styles %}
{{super()}}
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jq-3.3.1/dt-1.10.18/r-2.2.2/datatables.min.css"/>
  <link href="https://cdn.datatables.net/buttons/1.5.6/css/buttons.dataTables.min.css"rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="{{url_for('static', filename ='css/allPendingForms.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename ='css/pendingNotesModal.css')}}">

{% endblock %}

{% block scripts %}
{{super()}}
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-3.3.1/dt-1.10.18/r-2.2.2/datatables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/dataTables.buttons.min.js"></script>
  <script type="text/javascript" src="{{url_for('static', filename='js/allPendingForms.js') }}"></script>
{% endblock %}


{% block app_content %}
<div align="center">
  <h1>{{title}}</h1>
</div>

<div class="container" id="wrapper" align="center">
   <div id="pendingTabs" class="container" style='text-align: center;'>
     <ul  class="nav nav-pills" style='text-align: center;'>
        <li id='laborTab' {% if formType == "pendingLabor" %} class="active" {% endif %}>
          <a href="{{url_for('admin.allPendingForms', formType = 'pendingLabor')}}"> Pending Labor Status Forms <strong>({{ laborStatusFormCounter }})</strong></a>
        </li>
        <li id='modifiedTab' {% if formType == "pendingModified" %} class="active" {% endif %}>
          <a href="{{url_for('admin.allPendingForms', formType = 'pendingModified')}}">Pending Adjustment Forms <strong>({{ modifiedFormCounter }})</strong></a>
        </li>
        <li id='overloadTab' {% if formType == "pendingOverload" %} class="active" {% endif %}>
          <a href="{{url_for('admin.allPendingForms', formType = 'pendingOverload')}}">Pending Overload Forms <strong>({{ overloadFormCounter }})</strong></a>
        </li>
        <li id='releaseTab' {% if formType == "pendingRelease" %} class="active" {% endif %}>
          <a href="{{url_for('admin.allPendingForms', formType = 'pendingRelease')}}">Pending Release Forms <strong>({{ releaseFormCounter }})</strong></a>
        </li>
      </ul>
      </div>
       <br> </br>
      <div align="center" class="tab-content clearfix">
			  <div class="tab-pane active" id="allPendingForms">
          <div class="col-lg-12" align="center" >
            <table id="pendingForms" class="table table-striped pendingForms dataTable" >
              <!-- Made empty header tags because we need to hide the header -->
              <thead id="headTable" text-align="center" >
                <tr id="tableHeaders" class="tableHeaders" >
                  {% if formType != "pendingOverload" %}
                  <th> Approve </th>
                  {% endif %}
                  <th>Term</th>
                  <th>Department</th>
                  <th>Supervisor</th>
                  <th> </th>
                  <th>Students</th>
                  <th> Position (WLS)</th>
                  <th>Hours</th>
                  <th>Created</th>
                  <th>Contract Dates</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="tablebody">
                {% for allForms in formList %}
                <tr id="tableData" class="tableData" align="center">
                  {% if formType != "pendingOverload" %}
                    <td> {# APPROVE #}
                      <input type='checkbox' id='chk_{{allForms.formHistoryID}}' value= "{{allForms.formHistoryID}}" name="check[]"  autocomplete="off" />
                    </td>
                    {% endif %}
                    <td> {# TERM #}
                      {{allForms.formID.termCode.termName}}
                    </td>
                    <td> {# DEPARTMENT #}
                      {{allForms.formID.department.DEPT_NAME}} ({{allForms.formID.department.ORG}}-{{allForms.formID.department.ACCOUNT}})
                    </td>
                    <td> {# SUPERVISOR #}
                      {{allForms.formID.supervisor.FIRST_NAME}} {{allForms.formID.supervisor.LAST_NAME}}
                    </td>
                    <td>
                      |
                    </td>
                    <td> {# STUDENT #}
                      {{allForms.formID.studentSupervisee.FIRST_NAME}}  {{allForms.formID.studentSupervisee.LAST_NAME}}  ({{allForms.formID.studentSupervisee.ID}})
                    </td>
                    <td> {# POSITON AND WLS #}
                      {{allForms.formID.POSN_TITLE}}
                    </td>
                    <td> {# HOURS #}
                    {% if allForms.formID.weeklyHours != None%} {{allForms.formID.weeklyHours}} {% else %}   {{allForms.formID.contractHours}} {% endif %}
                  </td>
                  <td> {# CREATED BY #}
                    {{allForms.createdBy.username}}  <br/> {{allForms.createdDate.strftime('%m/%d/%y')}}
                  </td>
                  <td> {# CREATED DATE #}
                     {{allForms.formID.startDate.strftime('%m/%d/%y')}} -  {{allForms.formID.endDate.strftime('%m/%d/%y')}}
                  </td>
                  <td> {# ACTION #}

                    {% with modalTarget = modalTarget %}
                      {% include "snips/FormsDeny.html" %}
                    {% endwith %}

                    {% with modalTarget = modalTarget %}
                      {% include "snips/pendingOverloadModal.html" %}
                    {% endwith %}
                    <div class="dropdown">
                      {% include "snips/pendingNotesModal.html" %}
                      <button class="btn btn-primary dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">Actions
                      <span class="caret"></span></button>
                      <ul class="dropdown-menu" role="menu" aria-labelledby="menu1" style="min-width: 100%;">
                        {% if allForms.historyType.historyTypeName != 'Labor Overload Form' %}
                        <li role="presentation"><a role="menuitem">
                          <span id="reject_{{allForms.formHistoryID}}"
                            data-toggle="modal"
                            data-target="#{{modalTarget}}"
                            onclick="insertDenial({{allForms.formHistoryID}});">Deny</span></a></li>
                        {% else %}
                        <li role="presentation"><a role="menuitem">
                          <span id="{{allForms.formHistoryID}}"
                                data-toggle="modal"
                                data-target="#modalOverload"
                                onclick="loadOverloadModal({{allForms.formHistoryID}}, {{allForms.formID.laborStatusFormID}});">Manage</span></a></li>
                        {% endif %}
                        <li role="presentation"><a role="menuitem" href="/modifyLSF/{{allForms.formID.laborStatusFormID}}">
                          <span id="edit_{{allForms.formID.laborStatusFormID}}">Edit</span></a></li>
                        <li role="presentation"><a role="menuitem"
                          <span id="notes_{{allForms.formID.laborStatusFormID}}"
                                onclick="getNotes({{allForms.formID.laborStatusFormID}})"
                                data-toggle="modal"
                                data-target="#NotesModal">Notes</span></a></li>
                      </ul>
                    </div>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
              </table>
                <div class="btn-holder">
                  {% include "snips/pendingApprovalModal.html" %}
                  <button
                    id="approveSelected"
                    name="approveBtn"
                    type="button"
                    class="btn btn-newcolor"
                    onclick="insertApprovals();"
                    value="Approve Selected"
                    data-target="#approvalModal"
                    data-toggle="modal">
                    Approve Selected
                  </button>
                </div>
                </div>
          </div>
   </div>
  </div>

{% endblock %}
